set -g mouse on
set -g set-clipboard on

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# set -g default-terminal "tmux-256color"

# Vim-mode.
# use vim keybindings in copy mode
set-option -g mode-keys vi

# setup 'v' to begin selection like in Vim
# http://jilles.me/tmux-for-developers/
#bind-key -t vi-copy v begin-selection
#bind-key -t vi-copy y copy-pipe "reattach-to-user-namespace pbcopy"

# Status bar
set -g status-bg colour234 # Slightly darker grey.
set -g status-fg colour137 # Brown/orange.
set -g status-attr dim

# Ctrl-b r to reload the configuration file.
bind r source-file ${HOME}/.tmux.conf \; display-message "Tmux config has been reloaded."

# Use C-b C-k to clear to screen.
# https://coderwall.com/p/r6saiq/iterm2-tmux-cmd-k
bind C-k send-keys -R \; clear-history

# Vim-inspired pane switching.
# I don't map hjkl, because I want to be able to switch to the last window using l.
# Also, I switch pretty much only between L/R, so I don't want to move my fingers for that.
# bind j select-pane -L
# bind k select-pane -R

# Update: since it doesn't stop at the end, but starts again at the left or right, if I have only 2 panes,
# which on my iPad Pro screen I only use anyway. In that case, it's a toggle, there's no need to map more than 1 key for horizontal and if necessary,
# one for vertical.
bind j select-pane -L

# Plugins.
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-open'
set -g @plugin 'tmux-plugins/tmux-cpu'           # CPU 0.6% -> 2.4% (1.6% â€“ 3.5%).
# prefix + h and prefix + C-h: select pane on the left
# prefix + j and prefix + C-j: select pane below the current one
# prefix + k and prefix + C-k: select pane above: prefix + l and prefix + C-l
# set -g @plugin 'tmux-plugins/tmux-pain-control'

# NOTE: This run asynchronously. So we might move the line above to
# all the platform-specific files.
run-shell 'test -f ~/.tmux/$(uname).conf && tmux source-file ~/.tmux/$(uname).conf'
