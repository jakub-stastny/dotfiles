set -g mouse on
set -g set-clipboard on
set -g history-limit 10000

# Currently unreleased.
# Do not show dots if a smaller client connects to the session.
# https://github.com/tmux/tmux/blob/9768091ee448d7d3e54778a514ea89d3c809a141/CHANGES#L26
setw -g window-size largest

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# set -g default-terminal "tmux-256color"

# Vim-mode.
# use vim keybindings in copy mode
set-option -g mode-keys vi

# setup 'v' to begin selection like in Vim
# http://jilles.me/tmux-for-developers/
#bind-key -t vi-copy v begin-selection
#bind-key -t vi-copy y copy-pipe "reattach-to-user-namespace pbcopy"

# Status bar
set -g status-bg colour234 # Slightly darker grey.
set -g status-fg colour137 # Brown/orange.
#set -g status-attr dim

# Ctrl-b r to reload the configuration file.
bind r source-file ${HOME}/.tmux.conf \; display-message "Tmux config has been reloaded."

# Use C-b C-k to clear to screen.
# https://coderwall.com/p/r6saiq/iterm2-tmux-cmd-k
bind C-k send-keys -R \; clear-history

# Vim-inspired pane switching.
# I don't map hjkl, because I want to be able to switch to the last window using l.
# Also, I switch pretty much only between L/R, so I don't want to move my fingers for that.
# bind j select-pane -L
# bind k select-pane -R

# Update: since it doesn't stop at the end, but starts again at the left or right, if I have only 2 panes,
# which on my iPad Pro screen I only use anyway. In that case, it's a toggle, there's no need to map more than 1 key for horizontal and if necessary,
# one for vertical.
bind j select-pane -L

# TEMPORARY DISABLING, this causes bold to overflow to the main buffer, so everything is bold now.
# Note that there's something more wrong now, so it's in combination (on supervillains). The IP is in red and so is the username.
#
# Style active pane in a different colour.
# http://www.deanbodenham.com/learn/tmux-pane-colours.html
# set -g window-style 'fg=colour247,bg=colour236'
# set -g window-active-style 'fg=colour250,bg=black'

# Plugins.
# Would I use any plugins, there needs to be tmux plugin installation added to .scripts/dotfiles/dotfiles.install.
# set -g @plugin 'tmux-plugins/tpm'
# set -g @plugin 'tmux-plugins/tmux-sensible'
# # set -g @plugin 'tmux-plugins/tmux-open'
# set -g @plugin 'tmux-plugins/tmux-cpu'           # CPU 0.6% -> 2.4% (1.6% â€“ 3.5%).

# TMUX_GITBAR_DIR="$HOME/.tmux/plugins/tmux-gitbar"
# set -g @plugin 'arl/tmux-gitbar'
# # prefix + h and prefix + C-h: select pane on the left
# # prefix + j and prefix + C-j: select pane below the current one
# # prefix + k and prefix + C-k: select pane above: prefix + l and prefix + C-l
# # set -g @plugin 'tmux-plugins/tmux-pain-control'

# set -g @plugin 'tmux-plugins/tmux-resurrect'

# Set C-v as the prefix.
# C-a is popular, but I use it for jumping to the beginning of a line in shell.
set -g prefix C-v

# Show colours with the following snippet:
# for i in {0..255}; do printf "\x1b[38;5;${i}mcolour${i}\x1b[0m\n"; done
set -g status-left '#h::#(hostname -I | awk "{ print \$1 }") #[bg=colour226,fg=colour110] #S #[bg=colour194] #(cd #{pane_current_path}; git rev-parse --abbrev-ref HEAD) #[bg=colour212]#(git symbolic-ref --short HEAD)'
set -g status-right '#{cpu_fg_color}#{cpu_icon}#[fg=colour12,bg=colour234] #[fg=colour15,bg=colour39] %a %d/%m %H:%M %Z'

set -g status-left-length 120

# Currently selected window title (like tabs in the tab bar in chrome).
setw -g window-status-current-fg colour81  # light blue (window number)
setw -g window-status-current-bg colour238 # grey
setw -g window-status-current-attr bold
setw -g window-status-current-format ' #I#[fg=colour250]:#[fg=colour255]#W#[fg=colour50]#F ' # Anything past the window number.

setw -g window-status-fg colour138
setw -g window-status-bg colour235
setw -g window-status-attr none
setw -g window-status-format ' #I#[fg=colour237]:#[fg=colour250]#W#[fg=colour244]#F '

# I don't know why do I need to source it manually.
# Currently doesn't work with ZSH https://github.com/arl/tmux-gitbar/issues/60
# source-file "$HOME/.tmux/plugins/tmux-gitbar/tmux-gitbar.tmux"

# # Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
# run '~/.tmux/plugins/tpm/tpm'
