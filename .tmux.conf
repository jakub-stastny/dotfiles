# TODO: CI status
set -g mouse on
set -g set-clipboard on

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# Vim-mode.
# use vim keybindings in copy mode
set-option -g mode-keys vi

# setup 'v' to begin selection like in Vim
# http://jilles.me/tmux-for-developers/
#bind-key -t vi-copy v begin-selection
#bind-key -t vi-copy y copy-pipe "reattach-to-user-namespace pbcopy"

# Status bar
set -g status-position bottom
set -g status-bg colour234
set -g status-fg colour137
set -g status-attr dim
# set -g status-right '#[fg=colour233,bg=colour241,bold] %d/%m #[fg=colour233,bg=colour245,bold] %H:%M:%S '

# This will hide output of battery_remain if the battery is charging or charged, and shorten the time remaining (when discharging) to ~H:MM.
set -g @batt_remain_short true
set -g status-right 'Online #{online_status}#[fg=black,bold]| CPU #{cpu_fg_color}#{cpu_icon} #[fg=colour233,bg=colour256] | #[fg=white]#{battery_status_bg} #{battery_icon} #{battery_percentage} #{battery_remain} | %A %d/%m %H:%M '
#[fg=colour233,bg=colour241,bold] |
# set -g status-right '#[fg=colour233,bg=colour241,bold]#{battery_status_bg} Battery: #{battery_icon} #{battery_percentage} #{battery_remain} | %A %d/%m %H:%M '
# set -g status-right "Online: #{online_status}"
set -g @online_icon "#[fg=green]✔ "
set -g @offline_icon "#[fg=red]✖ "
set -g status-left '#(basename ${pane_current_path})'

set -g status-right-length 75
set -g status-left-length 50

setw -g window-status-current-fg colour81
setw -g window-status-current-bg colour238
setw -g window-status-current-attr bold
setw -g window-status-current-format ' #I#[fg=colour250]:#[fg=colour255]#W#[fg=colour50]#F '

setw -g window-status-fg colour138
setw -g window-status-bg colour235
setw -g window-status-attr none
setw -g window-status-format ' #I#[fg=colour237]:#[fg=colour250]#W#[fg=colour244]#F '

setw -g window-status-bell-attr bold
setw -g window-status-bell-fg colour255
setw -g window-status-bell-bg colour1

# Ctrl-b r to reload the configuration file.
bind r source-file ${HOME}/.tmux.conf \; display-message "Tmux config has been reloaded."

# https://coderwall.com/p/r6saiq/iterm2-tmux-cmd-k
bind C-k send-keys -R \; clear-history

# Plugins.
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-battery'
set -g @plugin 'tmux-plugins/tmux-cpu'
set -g @plugin 'tmux-plugins/tmux-online-status'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-open'
# prefix + h and prefix + C-h: select pane on the left
# prefix + j and prefix + C-j: select pane below the current one
# prefix + k and prefix + C-k: select pane above: prefix + l and prefix + C-l
# set -g @plugin 'tmux-plugins/tmux-pain-control'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
